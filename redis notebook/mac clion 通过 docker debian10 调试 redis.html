<!DOCTYPE html>
<html lang="zh-CN">
<head>
<!-- 2022-01-12 Wed 04:56 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>mac clion é€šè¿‡ docker debian10 è°ƒè¯• redis</title>
<meta name="generator" content="Org mode">
<meta name="author" content="æ—¶ä¸­è´º">
<link rel="stylesheet" type="text/css" href="file:/Users/he/notes/html/css/style.css" />
<link rel="shortcut icon" href="file:/Users/he/notes/html/images/favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="preamble" class="status">
<div id="navbar">
    <ul>
        <li id="site-master"><a href="file:/Users/he/notes/html/index.html">æµªçš„ä¸è½»</a></li>
        <li><a class="navbar-item" href="file:/Users/he/notes/html/gallery.html">Gallery</a> </li>
        <li><a class="navbar-item" href="file:/Users/he/notes/html/notebooks.html">Notebooks</a> </li>
        <li><a class="navbar-item" href="file:/Users/he/notes/html/links.html">Links</a> </li>
        <li><a class="navbar-item" href="file:/Users/he/notes/html/about.html">About</a> </li>
        <li class="search">
            <form action="http://google.com/search" method="get" accept-charset="utf-8">
                <input type="search" id="search" name="q" autocomplete="off" maxlength="30" placeholder="Google..">
                <input type="hidden" name="q" value="site:www.langdebuqing.com">
            </form>
        </li>
    </ul>
</div>
</div>
<div id="content">
<h1 class="title">mac clion é€šè¿‡ docker debian10 è°ƒè¯• redis</h1>
<div id="table-of-contents">
<h2>&#30446;&#24405;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org0a29a27">1. dockerfile</a></li>
<li><a href="#orgcdc2731">2. clion é…ç½®</a>
<ul>
<li><a href="#org2a7a92a">2.1. clion ä¸­é…ç½®è¿æ¥åˆ° docker çš„è¿œç¨‹å·¥å…·é“¾</a></li>
<li><a href="#org351968c">2.2. clion ä¸­ redis é¡¹ç›®é…ç½® docker è°ƒè¯•</a></li>
<li><a href="#org472a22e">2.3. é…ç½®è¿‡ç¨‹ä¸­çš„çš„æŠ¥é”™</a></li>
</ul>
</li>
</ul>
</div>
</div>
<p>
å‚è€ƒï¼š<br>
<a href="https://www.jetbrains.com/help/clion/remote-development.html">Remote development</a><br>
<a href="https://blog.jetbrains.com/clion/2020/01/using-docker-with-clion/">using-docker-with-clion</a><br>
</p>

<p>
clion è¿œç¨‹è°ƒè¯•æœ‰å¤šç§ï¼š<br>
</p>
<ol class="org-ol">
<li><code>gdbserver/lldb-server</code> clion ä½œä¸º gdb å®¢æˆ·ç«¯è¿æ¥è¿œç¨‹ gdbserver è¿›è¡Œè°ƒè¯•ã€‚æœ‰ç‚¹ä¸å¤ªæ–¹ä¾¿ï¼Œæ¯æ¬¡éœ€è¦æ‰‹åŠ¨åœ¨è¿œç¨‹å¯åŠ¨ gdbserverï¼›å¦‚æœè°ƒè¯•çš„æ˜¯å®ˆæŠ¤è¿›ç¨‹ï¼Œclion ç»ˆæ­¢è°ƒè¯•åï¼Œå®ˆæŠ¤è¿›ç¨‹ä¾ç„¶å­˜åœ¨ï¼Œè¿˜éœ€è¦æ‰‹åŠ¨ kill æ‰å®ˆæŠ¤è¿›ç¨‹<br></li>
<li><code>full remote mode</code> clion é€šè¿‡ ssh ç™»å½•åˆ°è¿œç¨‹ï¼Œåœ¨è¿œç¨‹å¯åŠ¨ä¸€ä¸ª gdb è¿›è¡Œè°ƒè¯•ã€‚æ”¯æŒ makefileã€cmakeã€‚é…ç½®å¥½åï¼Œè°ƒè¯•æ˜¯å…¨è‡ªåŠ¨çš„ï¼Œå’Œæœ¬åœ°è°ƒè¯•çš„ä½“éªŒå®Œå…¨ä¸€æ ·<br></li>
<li>&#x2026;<br></li>
</ol>
<p>
æœ¬æ–‡å°±æ˜¯ç¬¬ 2 ç§<br>
</p>

<div id="outline-container-org0a29a27" class="outline-2">
<h2 id="org0a29a27"><span class="section-number-2">1</span> dockerfile</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li>æ–‡ä»¶åï¼šDockerfile.clion_remote_cpp_env<br></li>
<li>æ„å»ºé•œåƒï¼š <code>$ docker build -t clion/remote-cpp-env:1.0 -f Dockerfile.clion_remote_cpp_env .</code><br></li>
<li>å¯åŠ¨å®¹å™¨ï¼š <code>$ docker run -d --cap-add sys_ptrace --security-opt seccomp=unconfined -v /Users/he/code:/home/dev/code:rw -p 127.0.0.1:2222:22/tcp -p 127.0.0.1:6379:6379/tcp --name clion_remote_env clion/remote-cpp-env:1.0</code><br></li>
<li>å…³åœå®¹å™¨ï¼š <code>$ docker stop clion_remote_env</code><br></li>
<li>ssh è¿æ¥ï¼š <code>$ ssh dev@127.0.0.1 -p 2222</code><br></li>
</ul>

<div class="org-src-container">
<pre class="src src-dockerfile"><span style="color: #8a8a8a;"># </span><span style="color: #8a8a8a;">CLion remote docker environment (How to build docker container, run and stop it)</span>
<span style="color: #8a8a8a;">#</span>
<span style="color: #8a8a8a;"># </span><span style="color: #8a8a8a;">Build and run:</span>
<span style="color: #8a8a8a;">#   </span><span style="color: #8a8a8a;"># &#20854;&#20013; --cap-add sys_ptrace &#21644; --security-opt seccomp=unconfined &#37117;&#26159;&#20026; gdb &#25552;&#20379;&#19968;&#20123;&#26435;&#38480;&#65292;&#38450;&#27490;&#20854;&#25253;&#38169;&amp;&#26041;&#20415;&#20854;&#20351;&#29992;</span>
<span style="color: #8a8a8a;">#   </span><span style="color: #8a8a8a;">docker build -t clion/remote-cpp-env:1.0 -f Dockerfile.clion_remote_cpp_env .</span>
<span style="color: #8a8a8a;">#   </span><span style="color: #8a8a8a;">docker run -d --cap-add sys_ptrace --security-opt seccomp=unconfined -v /Users/he/code:/home/dev/code:rw -p 2222:22/tcp -p 6379:6379/tcp --name clion_remote_env clion/remote-cpp-env:1.0</span>
<span style="color: #8a8a8a;">#   </span><span style="color: #8a8a8a;"># gdbserver &#35843;&#35797;&#26102;&#24320;&#21551;&#35843;&#35797;&#31471;&#21475; -p 1234:1234/tcp</span>
<span style="color: #8a8a8a;">#   </span><span style="color: #8a8a8a;"># docker run -d --cap-add sys_ptrace --security-opt seccomp=unconfined -v /Users/he/code:/home/dev/code:rw -p 2222:22/tcp -p 6379:6379/tcp -p 1234:1234/tcp --name clion_remote_env clion/remote-cpp-env:1.0</span>
<span style="color: #8a8a8a;">#</span>
<span style="color: #8a8a8a;"># </span><span style="color: #8a8a8a;">&#23481;&#22120;&#26032;&#24314;&#26102; 2222 &#31471;&#21475;&#34987;&#37325;&#26032;&#20351;&#29992;&#65292;&#26377;&#21487;&#33021;&#38656;&#35201;&#28165;&#29702;&#25481; known_hosts &#20445;&#23384;&#30340;&#20844;&#38053;&#65292;&#25165;&#33021; ssh &#35775;&#38382;</span>
<span style="color: #8a8a8a;">#   </span><span style="color: #8a8a8a;">ssh-keygen -f "$HOME/.ssh/known_hosts" -R "[localhost]:2222" &amp;&amp; ssh-keygen -f "$HOME/.ssh/known_hosts" -R "[127.0.0.1]:2222"</span>
<span style="color: #8a8a8a;">#</span>
<span style="color: #8a8a8a;"># </span><span style="color: #8a8a8a;">ssh credentials:</span>
<span style="color: #8a8a8a;">#   </span><span style="color: #8a8a8a;">ssh root@127.0.0.1 -p 2222</span>
<span style="color: #8a8a8a;">#   </span><span style="color: #8a8a8a;">ssh dev@127.0.0.1 -p 2222</span>

<span style="color: #5f8700;">FROM</span> <span style="color: #af8700; font-weight: bold;">debian:10</span>
<span style="color: #5f8700;">MAINTAINER</span> shi_zhonghe@163.com

<span style="color: #5f8700;">RUN</span> mv /etc/apt/sources.list /etc/apt/sources.list_bak &amp;&amp; ( <span style="color: #00afaf;">\</span>
    <span style="color: #5f8700;">echo</span> <span style="color: #00afaf;">'deb http://mirrors.aliyun.com/debian/ buster main non-free contrib'</span>; <span style="color: #00afaf;">\</span>
    <span style="color: #5f8700;">echo</span> <span style="color: #00afaf;">'deb http://mirrors.aliyun.com/debian/ buster-updates main non-free contrib'</span>; <span style="color: #00afaf;">\</span>
    <span style="color: #5f8700;">echo</span> <span style="color: #00afaf;">'deb http://mirrors.aliyun.com/debian/ buster-backports main non-free contrib'</span>; <span style="color: #00afaf;">\</span>
    <span style="color: #5f8700;">echo</span> <span style="color: #00afaf;">'deb http://mirrors.aliyun.com/debian-security/ buster/updates main non-free contrib'</span>; <span style="color: #00afaf;">\</span>
    <span style="color: #5f8700;">echo</span> <span style="color: #00afaf;">'deb-src http://mirrors.aliyun.com/debian/ buster main non-free contrib'</span>; <span style="color: #00afaf;">\</span>
    <span style="color: #5f8700;">echo</span> <span style="color: #00afaf;">'deb-src http://mirrors.aliyun.com/debian/ buster-updates main non-free contrib'</span>; <span style="color: #00afaf;">\</span>
    <span style="color: #5f8700;">echo</span> <span style="color: #00afaf;">'deb-src http://mirrors.aliyun.com/debian/ buster-backports main non-free contrib'</span>; <span style="color: #00afaf;">\</span>
    <span style="color: #5f8700;">echo</span> <span style="color: #00afaf;">'deb-src http://mirrors.aliyun.com/debian-security/ buster/updates main non-free contrib'</span>; <span style="color: #00afaf;">\</span>
  ) &gt; /etc/apt/sources.list    <span style="color: #8a8a8a;"># </span><span style="color: #8a8a8a;">&#26356;&#25442; apt &#28304;</span>

<span style="color: #5f8700;">RUN</span> <span style="color: #0087ff;">DEBIAN_FRONTEND</span>=<span style="color: #00afaf;">"noninteractive"</span> apt update &amp;&amp; apt -y install tzdata  <span style="color: #8a8a8a;"># </span><span style="color: #8a8a8a;">&#26041;&#20415;&#26080;&#20154;&#20540;&#23432;&#26500;&#24314;&#38236;&#20687;</span>

<span style="color: #5f8700;">RUN</span> apt update <span style="color: #00afaf;">\</span>
  &amp;&amp; apt install -y ssh <span style="color: #00afaf;">\</span>
    build-essential <span style="color: #00afaf;">\</span>
    gcc <span style="color: #00afaf;">\</span>
    g++ <span style="color: #00afaf;">\</span>
    clang <span style="color: #00afaf;">\</span>
    cmake <span style="color: #00afaf;">\</span>
    rsync <span style="color: #00afaf;">\</span>
    tar <span style="color: #00afaf;">\</span>
    python <span style="color: #00afaf;">\</span>
    python-dev <span style="color: #00afaf;">\</span>
    wget <span style="color: #00afaf;">\</span>
    pkg-config <span style="color: #00afaf;">\</span>
    tcl <span style="color: #00afaf;">\</span>
  &amp;&amp; apt clean

<span style="color: #8a8a8a;"># </span><span style="color: #8a8a8a;">apt install gdb &#20250;&#23433;&#35013; 8.2 &#29256;&#26412;&#65292;&#20302;&#20110; 8.3 &#29256;&#26412;&#26102;&#36828;&#31243;&#35843;&#35797;&#20250;&#26377;&#19968;&#20123;&#38382;&#39064;&#65288;&#24536;&#35760;&#35760;&#24405;&#26159;&#21861;&#38382;&#39064;&#20102;&#65289;&#12290;&#25152;&#20197;&#36825;&#37324;&#32534;&#35793;&#23433;&#35013;&#39640;&#29256;&#26412; gdb10.2 gdbserver10.2 &#31561;</span>
<span style="color: #8a8a8a;"># </span><span style="color: #8a8a8a;">&#32534;&#35793;&#26102;&#65292;&#20250;&#20381;&#36182; texinfo &#31561;</span>
<span style="color: #8a8a8a;"># </span><span style="color: #8a8a8a;">--with-python &#34920;&#31034; gdb &#25903;&#25345;&#35843;&#35797; python&#12290;clion &#35843;&#35797; c++ &#20063;&#20250;&#29992;&#21040; python &#33050;&#26412; pretty-printer&#65292;&#38656;&#35201;&#35774;&#32622;&#35813;&#39033;</span>
<span style="color: #5f8700;">RUN</span> apt install -y texinfo &amp;&amp; apt clean <span style="color: #00afaf;">\</span>
  &amp;&amp; wget https://ftp.gnu.org/gnu/gdb/gdb-10.2.tar.xz &amp;&amp; xz -d gdb-10.2.tar.xz &amp;&amp; tar -xf gdb-10.2.tar &amp;&amp; rm gdb-10.2.tar <span style="color: #00afaf;">\</span>
  &amp;&amp; <span style="color: #5f8700;">cd</span> gdb-10.2 &amp;&amp; ./configure --with-python &amp;&amp; make &amp;&amp; make install <span style="color: #00afaf;">\</span>
  &amp;&amp; <span style="color: #5f8700;">cd</span> .. &amp;&amp; rm -rf gdb-10.2

<span style="color: #5f8700;">RUN</span> useradd -m dev <span style="color: #00afaf;">\</span>
  &amp;&amp; yes 123456 | passwd dev <span style="color: #00afaf;">\</span>
  &amp;&amp; usermod -s /bin/bash dev <span style="color: #00afaf;">\</span>
  &amp;&amp; yes 123456 | passwd root  <span style="color: #8a8a8a;"># </span><span style="color: #8a8a8a;">&#21019;&#24314; dev &#29992;&#25143;&#12289;&#23494;&#30721;&#12289;&#30331;&#24405;&#21518;&#40664;&#35748;&#20351;&#29992; /bin/bash&#65307;&#20462;&#25913; root &#23494;&#30721;</span>

<span style="color: #5f8700;">RUN</span> sed -i <span style="color: #00afaf;">'s/^#alias ll='"'"'ls -l'"'"'$/alias ll='"'"'ls -l'"'"'/g'</span> /home/dev/.bashrc <span style="color: #00afaf;">\</span>
  &amp;&amp; sed -i <span style="color: #00afaf;">'s/^#alias ll='"'"'ls -l'"'"'$/alias ll='"'"'ls -l'"'"'/g'</span> /root/.bashrc  <span style="color: #8a8a8a;"># </span><span style="color: #8a8a8a;">.bashrc &#25991;&#20214;&#20462;&#25913;&#37197;&#32622; #alias ll='ls -l' &#26367;&#25442;&#20026; alias ll='ls -l'</span>
<span style="color: #5f8700;">RUN</span> ( <span style="color: #00afaf;">\</span>
    <span style="color: #5f8700;">echo</span> <span style="color: #00afaf;">'LogLevel DEBUG2'</span>; <span style="color: #00afaf;">\</span>
    <span style="color: #5f8700;">echo</span> <span style="color: #00afaf;">'PermitRootLogin yes'</span>; <span style="color: #00afaf;">\</span>
    <span style="color: #5f8700;">echo</span> <span style="color: #00afaf;">'PasswordAuthentication yes'</span>; <span style="color: #00afaf;">\</span>
    <span style="color: #5f8700;">echo</span> <span style="color: #00afaf;">'Subsystem sftp /usr/lib/openssh/sftp-server'</span>; <span style="color: #00afaf;">\</span>
  ) &gt; /etc/ssh/sshd_config_docker <span style="color: #00afaf;">\</span>
  &amp;&amp; mkdir /run/sshd

<span style="color: #5f8700;">CMD</span> [<span style="color: #00afaf;">"/usr/sbin/sshd"</span>, <span style="color: #00afaf;">"-D"</span>, <span style="color: #00afaf;">"-e"</span>, <span style="color: #00afaf;">"-f"</span>, <span style="color: #00afaf;">"/etc/ssh/sshd_config_docker"</span>]
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcdc2731" class="outline-2">
<h2 id="orgcdc2731"><span class="section-number-2">2</span> clion é…ç½®</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org2a7a92a" class="outline-3">
<h3 id="org2a7a92a"><span class="section-number-3">2.1</span> clion ä¸­é…ç½®è¿æ¥åˆ° docker çš„è¿œç¨‹å·¥å…·é“¾</h3>
<div class="outline-text-3" id="text-2-1">
<ol class="org-ol">
<li>åœ¨ clion ä¸­é…ç½®è¿æ¥ docker å®¹å™¨çš„ <code>SSH Configurations</code> ï¼š <code>ssh dev@127.0.0.1 -p 2222</code><br></li>
<li><p>
åœ¨ clion ä¸­é…ç½® Toolchains<br>
docker å®¹å™¨ä¸­ç¼–è¯‘å¥½çš„ gdb ä½äº <code>/usr/local/bin/gdb</code><br>
</p>

<div id="orgb9c01bf" class="figure">
<p><img src="../images/clion_toolchains_conf_docker.png" alt="clion_toolchains_conf_docker.png" width="50%"><br>
</p>
</div></li>
</ol>
</div>
</div>

<div id="outline-container-org351968c" class="outline-3">
<h3 id="org351968c"><span class="section-number-3">2.2</span> clion ä¸­ redis é¡¹ç›®é…ç½® docker è°ƒè¯•</h3>
<div class="outline-text-3" id="text-2-2">
<ol class="org-ol">
<li>åœ¨ clion ä¸­ç‚¹å‡» Open -&gt; é€‰ä¸­ redis æ ¹ç›®å½•çš„ Makefile -&gt; Open -&gt; Open as projectã€‚ç„¶åä¼šæ‰“å¼€ redis é¡¹ç›®å¹¶å¼¹çª— Load Projectï¼Œæç¤ºé…ç½® make clean å‘½ä»¤ï¼Œé…ç½®åç‚¹å‡» OK<br></li>
<li><p>
clion æ­¤æ—¶ä¼šæ‰§è¡Œ build æ“ä½œï¼Œåˆ†ä¸º 2 æ­¥<br>
</p>
<ul class="org-ul">
<li><code>åˆ†æ Makefile æ–‡ä»¶</code> æå– Makefile ä¸­çš„æ‰€æœ‰ Targetï¼Œä¾› clion ä½¿ç”¨<br></li>
<li><code>build</code> å³å‘½ä»¤ <code>$ make all</code> ï¼Œå¯åœ¨ <code>Build,Execution,Deployment-&gt;Makefile</code> é¡µé…ç½®ã€‚æŒ‰ç†è¯´åº”è¯¥ä¼šè¿›å…¥ docker å®¹å™¨ä¸­çš„ redis é¡¹ç›®ç›®å½•ï¼ˆè¯¥ç›®å½•åœ¨ clion ä¸­æ­¤æ—¶è¿˜æœªé…ç½®ï¼‰ï¼Œè¿›è¡Œ build<br></li>
</ul>
<p>
æ­¤æ—¶ä¼šæŠ¥é”™ã€‚æŠ¥é”™æç¤ºè¿›å…¥äº†ç›®å½• <code>/tmp/tmp.UYeUotPS8H</code> ï¼Œç›®å½•è‚¯å®šè¿›é”™äº†ï¼Œæš‚æ—¶ä¸ç®¡è¿™ä¸ªé”™è¯¯ï¼Œç»§ç»­å‘ä¸‹èµ°<br>
</p>

<div id="orgd1c206c" class="figure">
<p><img src="../images/clion_build_makefile_analyze.png" alt="clion_build_makefile_analyze.png" width="50%"><br>
</p>
</div></li>
<li><p>
åœ¨ clion ä¸­é…ç½® Makefile é¡µ<br>
toolchains è°ƒæ•´ä¸ºåˆšæ‰é…ç½®çš„ docker Toolchain<br>
</p>

<div id="org2073451" class="figure">
<p><img src="../images/clion_makefile_conf.png" alt="clion_makefile_conf.png" width="50%"><br>
</p>
</div></li>
<li><p>
åœ¨ clion ä¸­é…ç½® Deployment<br>
</p>
<ul class="org-ul">
<li><code>Local or mounted folder</code> å°±ç”¨è¿™ä¸ªã€‚é¡¹ç›®ç›®å½•æ­£æ˜¯æŒ‚è½½åœ¨ docker ä¸­çš„<br></li>
<li><code>In place</code> è¡¨ç¤ºé¡¹ç›®å·²ç»åœ¨å®ƒè¯¥åœ¨çš„ä½ç½®ä¸Šäº†ï¼Œé¡¹ç›®ä¸ç”¨æ‰§è¡ŒåŒæ­¥æ“ä½œã€‚<br></li>
</ul>

<div id="org7d0c628" class="figure">
<p><img src="../images/clion_deployment_connection.png" alt="clion_deployment_connection.png" width="50%"><br>
</p>
</div>

<p>
é¦–æ¬¡ç‚¹è¿› Mappings é¡µæ—¶ï¼Œçº¢åœˆ <code>Deployment path</code> é¡¹ä¸å­˜åœ¨ï¼Œéœ€è¦ç‚¹å‡» <code>Add New Mapping</code> æŠŠå®ƒæå‡ºæ¥ã€‚æå‡ºæ¥åï¼Œå®ƒçš„å€¼æ˜¯ <code>/tmp/tmp.UYeUotPS8H</code> ï¼Œæ‰€ä»¥æ­¥éª¤ 2 æŠ¥é”™ï¼Œæ”¹å®Œå°±å¥½äº†<br>
</p>

<div id="org4c84418" class="figure">
<p><img src="../images/clion_deployment_mappings.png" alt="clion_deployment_mappings.png" width="40%"><br>
</p>
</div>

<p>
ç„¶åè¿›å…¥æ­¥éª¤ 2 çš„ç•Œé¢ <code>Reload Makefile Project</code> ï¼Œç„¶åæ‰§è¡Œå®Œæ­¥éª¤ 2 åï¼Œclion ä¼šæå–åˆ°ä¸€äº› Makefile ä¿¡æ¯ï¼Œå¦‚ä¸‹å›¾<br>
</p>

<div id="orgb00814d" class="figure">
<p><img src="../images/clion_makefile_application_debug.png" alt="clion_makefile_application_debug.png" width="30%"><br>
</p>
</div></li>
<li><p>
åœ¨ clion ä¸­é…ç½® Makefile Application ç”¨äºè°ƒè¯•<br>
</p>
<ul class="org-ul">
<li>ä¸‹æ‹‰æ¡†é€‰ä¸­ <code>redis-server</code> åï¼Œç‚¹å‡» ğŸ”¨ ç¼–è¯‘å‡º <code>redis-server</code> äºŒè¿›åˆ¶æ–‡ä»¶ï¼›æˆ–åœ¨ docker å®¹å™¨ä¸­ <code>$ make all</code><br></li>
<li>ç‚¹å‡» <code>Edit Configurations...</code> -&gt; <code>Makefile Application</code> -&gt; <code>redis-server</code><br></li>
<li><code>Executable</code> é¡¹é€‰æ‹©ç¼–è¯‘å¥½çš„ <code>redis-server</code> äºŒè¿›åˆ¶æ–‡ä»¶<br></li>
<li><code>Working directory</code> é¡¹å¡« <code>/Users/he/code/redis</code> ï¼ˆä¸ºä»€ä¹ˆæ˜¯æœ¬æœºç›®å½•è€Œé remote host ç›®å½•å‘¢ï¼Ÿclion ä¼šæŠŠæœ¬æœºç›®å½•æ˜ å°„ä¸º remote host ç›®å½•çš„ï¼‰ï¼Œå¦åˆ™ä¼šé»˜è®¤ä¸º redis-server äºŒè¿›åˆ¶æ–‡ä»¶æ‰€åœ¨ç›®å½•<br></li>
</ul>

<div id="org428d1a7" class="figure">
<p><img src="../images/clion_makefile_application_conf.png" alt="clion_makefile_application_conf.png" width="50%"><br>
</p>
</div></li>
<li>å¯ä»¥æ–­ç‚¹ debug äº†<br></li>
</ol>
</div>
</div>

<div id="outline-container-org472a22e" class="outline-3">
<h3 id="org472a22e"><span class="section-number-3">2.3</span> é…ç½®è¿‡ç¨‹ä¸­çš„çš„æŠ¥é”™</h3>
<div class="outline-text-3" id="text-2-3">
<p>
clion console æŠ¥é”™<br>
</p>
<blockquote>
<p>
Error during pretty printers setup: Error while executing Python code<br>
Some features and performance optimizations will not be available.<br>
</p>
</blockquote>

<p>
æ‰“å¼€ clion æ—¥å¿—çœ‹ä¸€ä¸‹ï¼šHelp -&gt; Show Log in Finder -&gt; idea.log<br>
</p>
<blockquote>
<p>
2022-01-10 02:57:50,398 [  26479]   WARN - brains.cidr.execution.debugger - &gt;python import sys; sys.dont_write_bytecode = True; sys.path.insert(0, "<i>tmp/3e9651bf-cd4f-412a-a0e3-193eecdfde7b</i>.clion.resources/pretty_printers/gdb"); from default.printers import register_default_printers; register_default_printers(None); from default.libstdcxx_printers import patch_libstdcxx_printers_module; patch_libstdcxx_printers_module();<br>
2022-01-10 02:57:50,399 [  26480]   WARN - brains.cidr.execution.debugger - &lt;^error,msg="Error while executing Python code."<br>
2022-01-10 02:57:50,399 [  26480]   WARN - brains.cidr.execution.debugger - Error during pretty printers setup: Error while executing Python code.<br>
</p>

<p>
Some features and performance optimizations will not be available.<br>
com.jetbrains.cidr.execution.debugger.backend.gdb.GDBDriver$GDBCommandException: Error while executing Python code.<br>
</p>
</blockquote>

<p>
åˆ†æï¼š<br>
</p>
<ul class="org-ul">
<li>å…¶ä¸­ï¼Œæ—¥å¿—ç¬¬ä¸€æ¡æœ‰ä¸ªè·¯å¾„ <code>/tmp/3e9651bf-cd4f-412a-a0e3-193eecdfde7b/.clion.resources/pretty_printers/gdb</code> ï¼Œ=3e9651bf-cd4f-412a-a0e3-193eecdfde7b= æ˜¯è¿œç¨‹ä¸»æœºç¼–å·ï¼Œå¯ä»¥åœ¨ clion Deployment é…ç½®é‡Œé¢çœ‹åˆ°<br></li>
<li>åœ¨ docker å®¹å™¨ä¸­æœ‰ç›®å½• <code>/home/dev/code/tmp/3e9651bf-cd4f-412a-a0e3-193eecdfde7b/.clion.resources/pretty_printers/gdb</code><br></li>
<li>æ‰€ä»¥è‚¯å®šæ˜¯åœ¨ docker å®¹å™¨ä¸­ï¼Œgdb åŠ è½½è¿™ä¸ª python è·¯å¾„æ—¶ï¼Œæ²¡æœ‰ <code>/tmp/3e9651bf-cd4f-412a-a0e3-193eecdfde7b/...</code> è¿™ä¸ªç›®å½•ï¼Œå¯¼è‡´ python module æ— æ³•åŠ è½½<br></li>
<li><p>
åœ¨ docker å®¹å™¨ä¸­ï¼Œ/home/dev/.gdbinit ä¸­æ·»åŠ é…ç½®ã€‚æ·»åŠ åå†ç”¨ clion è¿æ¥ docker å®¹å™¨è°ƒè¯•ï¼Œå°±ä¸ä¼šæŠ¥è¿™ä¸ªé”™äº†<br>
å‚è€ƒï¼š<a href="https://sourceware.org/gdb/wiki/STLSupport">https://sourceware.org/gdb/wiki/STLSupport</a><br>
</p>
<div class="org-src-container">
<pre class="src src-conf">python
import sys
sys.path.insert(0, <span style="color: #00afaf;">'/home/dev/code/tmp/3e9651bf-cd4f-412a-a0e3-193eecdfde7b/.clion.resources/pretty_printers/gdb'</span>)
end
</pre>
</div></li>
</ul>
<p>
è¡¥å……ï¼š<br>
åæ¥æƒ³åˆ°ï¼Œä¹‹å‰æ›¾åœ¨ clion -&gt; Deployment é…ç½® docker æ—¶ï¼ŒType é…ç½®ä¸º <code>Local or mounted folder</code> ï¼Œæœ‰ä¸ªå‚æ•° Folder é…ç½®ä¸º <code>/home/dev/code</code> ã€‚ä¼°è®¡ clion æŠŠè¿™ä¸ªç›®å½•è®¤ä¸ºæ˜¯ docker å®¹å™¨æ ¹ç›®å½•äº†ï¼Œæ‰€ä»¥æ‰ä¼šå‡ºç°é‚£ä¸ªæ— æ•ˆçš„ python æœç´¢è·¯å¾„ã€‚åˆ æ‰å®¹å™¨ï¼Œåˆ æ‰é¡¹ç›® .idea æ–‡ä»¶ï¼Œé‡æ–°é…ç½®ã€‚Folder æ”¹ä¸º <code>/</code> å°±ä¸å†æŠ¥é”™äº†ï¼Œå®¹å™¨å†…æ–‡ä»¶ .gdbinit å¼•å…¥çš„ python æ¨¡å—çš„ä»£ç ä¹Ÿå¯ä»¥å»æ‰äº†ã€‚<br>
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p>æœ¬ç¬”è®°ç³»ç»Ÿç”±
    <a href="">æ—¶ä¸­è´º</a> æ­å»ºå’Œç»´æŠ¤ï¼Œä½¿ç”¨
    <a href="https://www.gnu.org/software/emacs/">Emacs</a>
    <a href="http://orgmode.org/">Org mode</a> ç¼–è¾‘å’Œæ„å»º
    <br />
    email: shi_zhonghe@163.com
</p>
<script src="file:/Users/he/notes/html/css/jquery-2.1.3.min.js"></script>
<script src="file:/Users/he/notes/html/css/main.js"></script>
</div>
</body>
</html>
